runprogram(char *progname)������������������������������������������������������
{�������������������������������������������������������������������������������
��������struct vnode *v;��������������������������������������������������������
��������vaddr_t entrypoint, stackptr;�������������������������������������������
��������int result;�������������������������������������������������������������
��������������������������������������������������������������������������������
��������/* Open the file. */����������������������������������������������������
��������result = vfs_open(progname, O_RDONLY, &v);������������������������������
��������if (result) {�����������������������������������������������������������
����������������return result;��������������������������������������������������
��������}�����������������������������������������������������������������������
��������������������������������������������������������������������������������
��������/* We should be a new thread. */����������������������������������������
��������assert(curthread->t_vmspace == NULL);�����������������������������������
��������������������������������������������������������������������������������
��������/* Create a new address space. */���������������������������������������
��������curthread->t_vmspace = as_create();�������������������������������������
��������if (curthread->t_vmspace==NULL) {���������������������������������������
����������������vfs_close(v);���������������������������������������������������
����������������return ENOMEM;��������������������������������������������������
��������}

��������/* Activate it. */
��������������������������������������������������������������25,1����������45%
